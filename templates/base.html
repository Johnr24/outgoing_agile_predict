{% load static %}

<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Agile Outgoing Predict</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous"
        />
    </head>
    <body class="bg-body">
        <header>
            <div class="container-lg">
                <nav class="navbar navbar-expand-lg bg-primary-subtle">
                    <div class="container-fluid">
                        <a class="navbar-brand" href="#">AgilePredict</a>
                        <button
                            class="navbar-toggler"
                            type="button"
                            data-bs-toggle="collapse"
                            data-bs-target="#navbarSupportedContent"
                            aria-controls="navbarSupportedContent"
                            aria-expanded="false"
                            aria-label="Toggle navigation"
                        >
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                                <li class="nav-item">
                                    <a class="nav-link active" aria-current="page" href="/X">Home</a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a
                                        class="nav-link dropdown-toggle"
                                        href="#"
                                        id="navbarDropdown"
                                        role="button"
                                        data-bs-toggle="dropdown"
                                        aria-expanded="false"
                                    >
                                        Region
                                    </a>
                                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                        {% for key, value in REGIONS.items %}
                                        <li><a class="dropdown-item" href="/{{key}}">{{value}}</a></li>
                                        {% endfor %}
                                    </ul>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/api_how_to">API and Home Assistant</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/stats">Stats</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/about">About</a>
                                </li>
                                <li class="nav-item">
                                    <script
                                        type="text/javascript"
                                        src="https://storage.ko-fi.com/cdn/widget/Widget_2.js"
                                    ></script>
                                    <script type="text/javascript">
                                        kofiwidget2.init("Support Me on Ko-fi", "#031633", "Z8Z8XYWJM");
                                        kofiwidget2.draw();
                                    </script>
                                </li>
                                {% comment %}
                                <button id="colorModeToggle" class="btn btn-outline-secondary ms-auto">
                                    Toggle Color Mode
                                </button>
                                {% endcomment %}
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
        </header>

        <div style="width: 100%; overflow: hidden">{% block content %} {% endblock content %}</div>

        <script>
            document.addEventListener("DOMContentLoaded", (event) => {
                const toggleButton = document.getElementById("colorModeToggle");
                const bodyElement = document.body;

                // Check localStorage for saved color mode
                const savedColorMode = localStorage.getItem("colorMode");
                if (savedColorMode) {
                    bodyElement.setAttribute("data-bs-theme", savedColorMode);
                }

                toggleButton.addEventListener("click", () => {
                    const currentTheme = bodyElement.getAttribute("data-bs-theme");
                    const newTheme = currentTheme === "light" ? "dark" : "light";
                    bodyElement.setAttribute("data-bs-theme", newTheme);

                    // Save the current mode in localStorage
                    localStorage.setItem("colorMode", newTheme);
                });
            });
        </script>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"
        ></script>
    </body>
</html>
